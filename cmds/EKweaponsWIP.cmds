# -------------------------------------
# |           ASSAULT RIFLE           |
# -------------------------------------
OpenCacheFile "h3maps\zanzibar.map"

PortTag Replace objects\weapons\rifle\assault_rifle\assault_rifle.model
PortTag Replace objects\weapons\rifle\assault_rifle\fp_assault_rifle\fp_assault_rifle.mode
Exit

# Weapons are still WIP
# Thanks alot Oli ( I Can't Think of a Good Username )
# -------------------------------------
# |           BATTLE RIFLE            |
# -------------------------------------
OpenCacheFile workingdir\maps\h2weapons.map
#NameBlamTag objects\weapons\rifle\battle_rifle\battle_rifle.render_model fuckyoubr1
# THIS RENDER MODEL IS USED FOR FP AND TP MODEL
NameBlamTag objects\temp\zekken\weapons\battle_rifle\battle_rifle.render_model objects\weapons\rifle\battle_rifle\battle_rifle
PortTag Replace objects\weapons\rifle\battle_rifle\battle_rifle.render_model

# -------------------------------------
# |            BEAM RIFLE             |
# -------------------------------------
NameBlamTag objects\weapons\rifle\beam_rifle\fp_beam_rifle\fp_beam_rifle.render_model fuckyoubeamrifle2

NameBlamTag objects\temp\zekken\weapons\beam_rifle\beam_rifle.render_model objects\weapons\rifle\beam_rifle\beam_rifle
NameBlamTag objects\temp\zekken\weapons\beam_rifle\fp_beam_rifle\fp_beam_rifle.render_model objects\weapons\rifle\beam_rifle\fp_beam_rifle\fp_beam_rifle

PortTag Replace objects\weapons\rifle\beam_rifle\beam_rifle.render_model
PortTag Replace objects\weapons\rifle\beam_rifle\fp_beam_rifle\fp_beam_rifle.render_model

PortTag Replace Single objects\characters\masterchief\fp\weapons\rifle\fp_beam_rifle\fp_beam_rifle.model_animation_graph
PortTag Replace Single objects\characters\dervish\fp\weapons\rifle\fp_beam_rifle\fp_beam_rifle.model_animation_graph

# -------------------------------------
# |            BRUTE SHOT             |
# -------------------------------------
NameBlamTag objects\weapons\support_low\brute_shot\fp_brute_shot\fp_brute_shot.render_model fuckyoubruteshot2

NameBlamTag objects\temp\zekken\weapons\brute_shot\brute_shot.render_model objects\weapons\support_low\brute_shot\brute_shot
NameBlamTag objects\temp\zekken\weapons\brute_shot\fp_brute_shot\fp_brute_shot.render_model objects\weapons\support_low\brute_shot\fp_brute_shot\fp_brute_shot

PortTag Replace objects\weapons\support_low\brute_shot\brute_shot.render_model
PortTag Replace objects\weapons\support_low\brute_shot\fp_brute_shot\fp_brute_shot.render_model

# -------------------------------------
# |             CARBINE               |
# -------------------------------------
NameBlamTag objects\weapons\rifle\covenant_carbine\fp_covenant_carbine\fp_covenant_carbine.render_model fuckyoucarb1

NameBlamTag objects\temp\zekken\weapons\covenant_carbine\covenant_carbine.render_model objects\weapons\rifle\covenant_carbine\covenant_carbine
NameBlamTag objects\temp\zekken\weapons\covenant_carbine\fp_covenant_carbine\fp_covenant_carbine.render_model objects\weapons\rifle\covenant_carbine\fp_covenant_carbine\fp_covenant_carbine

PortTag Replace objects\weapons\rifle\covenant_carbine\covenant_carbine.render_model
PortTag Replace objects\weapons\rifle\covenant_carbine\fp_covenant_carbine\fp_covenant_carbine.render_model

# -------------------------------------
# |           ENERGY SWORD            |
# -------------------------------------
# ENERGY BLADE, SWORD
NameBlamTag objects\weapons\melee\energy_blade\fp_energy_blade\fp_energy_blade.render_model fuckyousword1

NameBlamTag objects\temp\zekken\weapons\energy_blade\fp_energy_blade\fp_energy_blade.render_model objects\weapons\melee\energy_blade\fp_energy_blade\fp_energy_blade
PortTag Replace objects\weapons\melee\energy_blade\fp_energy_blade\fp_energy_blade.render_model

# -------------------------------------
# |             FUEL ROD              |
# -------------------------------------
# FLAK CANNON, FUEL CANNON
NameBlamTag objects\weapons\support_high\flak_cannon\flak_cannon.render_model fuckyouflak1

NameBlamTag objects\temp\zekken\weapons\flak_cannon\flak_cannon.render_model objects\weapons\support_high\flak_cannon\flak_cannon
NameBlamTag objects\temp\zekken\weapons\flak_cannon\fp_flak_cannon\fp_flak_cannon.render_model objects\weapons\support_high\flak_cannon\fp_flak_cannon\fp_flak_cannon

PortTag Replace objects\weapons\support_high\flak_cannon\flak_cannon.render_model
PortTag Replace objects\weapons\support_high\flak_cannon\fp_flak_cannon\fp_flak_cannon.render_model

# -------------------------------------
# |              MAGNUM               |
# -------------------------------------
NameBlamTag objects\weapons\pistol\magnum\fp_magnum\fp_magnum.render_model fuckyoumagnum1

NameBlamTag objects\temp\zekken\weapons\magnum\magnum.render_model objects\weapons\pistol\magnum\magnum
NameBlamTag objects\temp\zekken\weapons\magnum\fp_magnum\fp_magnum.render_model objects\weapons\pistol\magnum\fp_magnum\fp_magnum

PortTag Replace objects\weapons\pistol\magnum\magnum.render_model
PortTag Replace objects\weapons\pistol\magnum\fp_magnum\fp_magnum.render_model

# -------------------------------------
# |             NEEDLER               |
# -------------------------------------
NameBlamTag objects\weapons\pistol\needler\fp_needler\fp_needler.render_model fuckyouneedler1

NameBlamTag objects\temp\zekken\weapons\needler\needler.render_model objects\weapons\pistol\needler\needler
NameBlamTag objects\temp\zekken\weapons\needler\fp_needler\fp_needler.render_model objects\weapons\pistol\needler\fp_needler\fp_needler

PortTag Replace objects\weapons\pistol\needler\needler.render_model
PortTag Replace objects\weapons\pistol\needler\fp_needler\fp_needler.render_model

# -------------------------------------
# |           PLASMA PISTOL           |
# -------------------------------------
NameBlamTag objects\weapons\pistol\plasma_pistol\fp_plasma_pistol\fp_plasma_pistol.render_model fuckyoupp1

NameBlamTag objects\temp\zekken\weapons\plasma_pistol\plasma_pistol.render_model objects\weapons\pistol\plasma_pistol\plasma_pistol
NameBlamTag objects\temp\zekken\weapons\plasma_pistol\fp_plasma_pistol\fp_plasma_pistol.render_model objects\weapons\pistol\plasma_pistol\fp_plasma_pistol\fp_plasma_pistol

PortTag Replace objects\weapons\pistol\plasma_pistol\plasma_pistol.render_model
PortTag Replace objects\weapons\pistol\plasma_pistol\fp_plasma_pistol\fp_plasma_pistol.render_model

# -------------------------------------
# |           PLASMA RIFLE            |
# -------------------------------------
NameBlamTag objects\weapons\rifle\plasma_rifle\fp_plasma_rifle\fp_plasma_rifle.render_model fuckyoupr1

NameBlamTag objects\temp\zekken\weapons\plasma_rifle\plasma_rifle.render_model objects\weapons\rifle\plasma_rifle\plasma_rifle
NameBlamTag objects\temp\zekken\weapons\plasma_rifle\fp_plasma_rifle\fp_plasma_rifle.render_model objects\weapons\rifle\plasma_rifle\fp_plasma_rifle\fp_plasma_rifle

PortTag Replace objects\weapons\rifle\plasma_rifle\plasma_rifle.render_model
PortTag Replace objects\weapons\rifle\plasma_rifle\fp_plasma_rifle\fp_plasma_rifle.render_model

# -------------------------------------
# |          ROCKET LAUNCHER          |
# -------------------------------------
NameBlamTag objects\weapons\support_high\rocket_launcher\fp_rocket_launcher\fp_rocket_launcher.render_model fuckyourocket1

NameBlamTag objects\temp\zekken\weapons\rocket_launcher\rocket_launcher.render_model objects\weapons\support_high\rocket_launcher\rocket_launcher
NameBlamTag objects\temp\zekken\weapons\rocket_launcher\fp_rocket_launcher\fp_rocket_launcher.render_model objects\weapons\support_high\rocket_launcher\fp_rocket_launcher\fp_rocket_launcher

PortTag Replace objects\weapons\support_high\rocket_launcher\rocket_launcher.render_model
PortTag Replace objects\weapons\support_high\rocket_launcher\fp_rocket_launcher\fp_rocket_launcher.render_model

PortTag Replace Single objects\characters\masterchief\fp\weapons\support_high\fp_rocket_launcher\fp_rocket_launcher.model_animation_graph

# -------------------------------------
# |           SENTINEL BEAM           |
# -------------------------------------
NameBlamTag objects\weapons\support_low\sentinel_gun\fp_sentinel_gun\fp_sentinel_gun.render_model fuckyousentinel1

NameBlamTag objects\temp\zekken\weapons\sentinel_beam\sentinel_beam.render_model objects\weapons\support_low\sentinel_gun\sentinel_gun
NameBlamTag objects\temp\zekken\weapons\sentinel_beam\fp_sentinel_beam\fp_sentinel_beam.render_model objects\weapons\support_low\sentinel_gun\fp_sentinel_gun\fp_sentinel_gun

PortTag Replace objects\weapons\support_low\sentinel_gun\sentinel_gun.render_model
PortTag Replace objects\weapons\support_low\sentinel_gun\fp_sentinel_gun\fp_sentinel_gun.render_model

# -------------------------------------
# |              SHOTGUN              |
# -------------------------------------
NameBlamTag objects\weapons\rifle\shotgun\fp_shotgun\fp_shotgun.render_model fuckyoushotgun1

NameBlamTag objects\temp\zekken\weapons\shotgun\shotgun.render_model objects\weapons\rifle\shotgun\shotgun
NameBlamTag objects\temp\zekken\weapons\shotgun\fp_shotgun\fp_shotgun.render_model objects\weapons\rifle\shotgun\fp_shotgun\fp_shotgun

PortTag Replace objects\weapons\rifle\shotgun\shotgun.render_model
PortTag Replace objects\weapons\rifle\shotgun\fp_shotgun\fp_shotgun.render_model

# -------------------------------------
# |                SMG                |
# -------------------------------------
NameBlamTag objects\weapons\rifle\smg\fp_smg\fp_smg.render_model fuckyousmg1

NameBlamTag objects\temp\zekken\weapons\smg\smg.render_model objects\weapons\rifle\smg\smg
NameBlamTag objects\temp\zekken\weapons\smg\fp_smg\fp_smg.render_model objects\weapons\rifle\smg\fp_smg\fp_smg

PortTag Replace objects\weapons\rifle\smg\smg.render_model
PortTag Replace objects\weapons\rifle\smg\fp_smg\fp_smg.render_model

# -------------------------------------
# |               SNIPER              |
# -------------------------------------
NameBlamTag objects\temp\zekken\weapons\sniper_rifle\sniper_rifle.render_model objects\weapons\rifle\sniper_rifle\sniper_rifle

PortTag Replace objects\weapons\rifle\sniper_rifle\sniper_rifle.render_model
Exit

# -------------------------------------
# |             MISC FIXUP            |
# -------------------------------------

# SNIPER <-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-
DuplicateTag objects\weapons\rifle\sniper_rifle\sniper_rifle.render_model objects\weapons\rifle\sniper_rifle\fp_sniper_rifle_h2\fp_sniper_rifle_h2
EditTag objects\weapons\rifle\sniper_rifle\sniper_rifle.weapon
SetField FirstPerson[0].FirstPersonModel objects\weapons\rifle\sniper_rifle\fp_sniper_rifle_h2\fp_sniper_rifle_h2.render_model
SetField FirstPerson[1].FirstPersonModel objects\weapons\rifle\sniper_rifle\fp_sniper_rifle_h2\fp_sniper_rifle_h2.render_model
SaveTagChanges
Exit

# Fix TP Sniper markers
# This fix no firing sound, broken left hand ik, etc
EditTag objects\weapons\rifle\sniper_rifle\sniper_rifle.render_model
AddBlockElements MarkerGroups 8

SetField MarkerGroups[0].Name ground_point
AddBlockElements MarkerGroups[0].Markers 1
SetField MarkerGroups[0].Markers[0].RegionIndex -1
SetField MarkerGroups[0].Markers[0].PermutationIndex -1
SetField MarkerGroups[0].Markers[0].Translation -0.021341622 0.017528862 0.0048972177
SetField MarkerGroups[0].Markers[0].Rotation 0.76493716 -0.000992903 0.048869867 0.6422476

SetField MarkerGroups[1].Name left_hand
AddBlockElements MarkerGroups[1].Markers 1
SetField MarkerGroups[1].Markers[0].RegionIndex -1
SetField MarkerGroups[1].Markers[0].PermutationIndex -1
SetField MarkerGroups[1].Markers[0].Translation 0.08523396 -0.0027922255 -0.025363985
SetField MarkerGroups[1].Markers[0].Rotation -0.5548693 0.42551363 -0.46787918 0.54050666

SetField MarkerGroups[2].Name left_hand_marine
AddBlockElements MarkerGroups[2].Markers 1
SetField MarkerGroups[2].Markers[0].RegionIndex -1
SetField MarkerGroups[2].Markers[0].PermutationIndex -1
SetField MarkerGroups[2].Markers[0].Translation 0.05661296 -0.0044479324 -0.030442242
SetField MarkerGroups[2].Markers[0].Rotation -0.59471905 0.4099132 -0.40109965 0.56338227

SetField MarkerGroups[3].Name muzzle_brake
AddBlockElements MarkerGroups[3].Markers 2
SetField MarkerGroups[3].Markers[0].RegionIndex -1
SetField MarkerGroups[3].Markers[0].PermutationIndex -1

SetField MarkerGroups[3].Markers[0].Translation 0.39609453 -0.020806793 0.0056307125
SetField MarkerGroups[3].Markers[0].Rotation -7.17E-08 4.5E-09 -0.60876137 0.7933534

SetField MarkerGroups[3].Markers[1].RegionIndex -1
SetField MarkerGroups[3].Markers[1].PermutationIndex -1
SetField MarkerGroups[3].Markers[1].Translation 0.39609453 0.020343542 0.0056307125
SetField MarkerGroups[3].Markers[1].Rotation -2E-08 -6.58E-08 0.60876155 0.79335326

SetField MarkerGroups[4].Name primary_ejection
AddBlockElements MarkerGroups[4].Markers 1
SetField MarkerGroups[4].Markers[0].RegionIndex -1
SetField MarkerGroups[4].Markers[0].PermutationIndex -1
SetField MarkerGroups[4].Markers[0].Translation 0.00795 -0.012208955 0.007921471
SetField MarkerGroups[4].Markers[0].Rotation 0.50864995 -0.49119774 -0.36946216 0.6029078

SetField MarkerGroups[5].Name primary_trigger
AddBlockElements MarkerGroups[5].Markers 1
SetField MarkerGroups[5].Markers[0].RegionIndex -1
SetField MarkerGroups[5].Markers[0].PermutationIndex -1
SetField MarkerGroups[5].Markers[0].Translation 0.4264232 4.3599999E-10 0.005799999
SetField MarkerGroups[5].Markers[0].Rotation -6.71E-08 -3.91E-08 6.99E-08 1

SetField MarkerGroups[6].Name right_hand
AddBlockElements MarkerGroups[6].Markers 1
SetField MarkerGroups[6].Markers[0].RegionIndex -1
SetField MarkerGroups[6].Markers[0].PermutationIndex -1
SetField MarkerGroups[6].Markers[0].Translation -0.06697202 -0.003105599 -0.037266213
SetField MarkerGroups[6].Markers[0].Rotation -4.1E-08 2.98E-08 6.54E-08 1

SetField MarkerGroups[7].Name weapon_stow_anchor
AddBlockElements MarkerGroups[7].Markers 1
SetField MarkerGroups[7].Markers[0].RegionIndex -1
SetField MarkerGroups[7].Markers[0].PermutationIndex -1
SetField MarkerGroups[7].Markers[0].Translation -0.0039839125 0.006011317 -0.006505313
SetField MarkerGroups[7].Markers[0].Rotation -0.6693277 0.32834446 0.2107923 0.6322635
SaveTagChanges
Exit

# Fix sniper scope
DuplicateTag objects\temp\zekken\weapons\sniper_rifle\bitmaps\sniper_rifle_scope_view.bitmap objects\temp\zekken\weapons\sniper_rifle\bitmaps\sniper_rifle_scope_view_fp
EditTag objects\temp\zekken\weapons\sniper_rifle\bitmaps\sniper_rifle_scope_view_fp.bitmap
ImportBitmap 0 workingdir\bitmaps\sniper_scope\sniper_rifle_scope_view3.dds
SaveTagChanges
Exit

DuplicateTag levels\multi\shrine\sky\shaders\sundisk.shader objects\weapons\rifle\sniper_rifle\shaders\sniper_rifle_scope_screen_h2
EditTag objects\weapons\rifle\sniper_rifle\shaders\sniper_rifle_scope_screen_h2.shader
SetField ShaderProperties[0].TextureConstants[0].ExternTextureMode Scope
SetField ShaderProperties[0].TextureConstants[2].Bitmap objects\temp\zekken\weapons\sniper_rifle\bitmaps\sniper_rifle_scope_view_fp.bitmap
SetArgument base_map 0.1 0.1 0.45 0.45
SetArgument self_illum_intensity 0.5
SaveTagChanges
Exit

EditTag objects\weapons\rifle\sniper_rifle\fp_sniper_rifle_h2\fp_sniper_rifle_h2.render_model
SetField Materials[1].RenderMethod objects\weapons\rifle\sniper_rifle\shaders\sniper_rifle_scope_screen_h2.shader
SaveTagChanges
Exit

# BATTLE RIFLE <-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<
DuplicateTag objects\weapons\rifle\battle_rifle\battle_rifle.render_model objects\weapons\rifle\battle_rifle\fp_battle_rifle_h2\fp_battle_rifle_h2
EditTag objects\weapons\rifle\battle_rifle\battle_rifle.weapon
SetField FirstPerson[0].FirstPersonModel objects\weapons\rifle\battle_rifle\fp_battle_rifle_h2\fp_battle_rifle_h2.render_model
SetField FirstPerson[1].FirstPersonModel objects\weapons\rifle\battle_rifle\fp_battle_rifle_h2\fp_battle_rifle_h2.render_model
SaveTagChanges
Exit

# Battle rifle blue lens scope
EditTag objects\temp\zekken\weapons\battle_rifle\shaders\battle_rifle_lens.shader
SetArgument env_tint_color 0.027450982 0.14117648 0.5803922 1
SaveTagChanges
Exit

